{"ast":null,"code":"import _regeneratorRuntime from \"/home/square/square/square/projects/blissfull-final-project/front/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/square/square/square/projects/blissfull-final-project/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/square/square/square/projects/blissfull-final-project/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/square/square/square/projects/blissfull-final-project/front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/square/square/square/projects/blissfull-final-project/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/square/square/square/projects/blissfull-final-project/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/square/square/square/projects/blissfull-final-project/front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/square/square/square/projects/blissfull-final-project/front/src/pages/Blog.js\";\nimport React from 'react';\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport { Link } from 'react-router-dom';\nimport Pagination from '../components/Pagination';\n\nvar Blog =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Blog, _React$Component);\n\n  function Blog() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Blog);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Blog)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      allposts: [],\n      currentPosts: [],\n      currentPage: null,\n      totalPages: null\n    };\n\n    _this.onPageChanged = function (data) {\n      var allposts = _this.state.allposts;\n      var currentPage = data.currentPage,\n          totalPages = data.totalPages,\n          pageLimit = data.pageLimit;\n      var offset = (currentPage - 1) * pageLimit;\n      var currentPosts = allposts.slice(offset, offset + pageLimit);\n\n      _this.setState({\n        currentPage: currentPage,\n        currentPosts: currentPosts,\n        totalPages: totalPages\n      });\n    };\n\n    _this.getAllPosts =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var response, answer, allposts;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"http://localhost:5000/posts/allposts\");\n\n            case 2:\n              response = _context.sent;\n              _context.next = 5;\n              return response.json();\n\n            case 5:\n              answer = _context.sent;\n\n              if (answer) {\n                allposts = answer.result;\n\n                _this.setState({\n                  allposts: allposts\n                });\n              }\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n    return _this;\n  }\n\n  _createClass(Blog, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getAllPosts();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          allposts = _this$state.allposts,\n          currentPosts = _this$state.currentPosts,\n          currentPage = _this$state.currentPage,\n          totalPages = _this$state.totalPages;\n      var totalPosts = allposts.length;\n      if (totalPosts === 0) return null;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"pag\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        className: \"text-seary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, totalPosts), \" \", \"Posts\"), currentPage && React.createElement(\"span\", {\n        className: \"curre\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"Page \", React.createElement(\"span\", {\n        className: \"font-weight-bold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, currentPage), \" /\", \" \", React.createElement(\"span\", {\n        className: \"font-weight-bold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, totalPages))), React.createElement(\"button\", {\n        className: \"viewall\",\n        onClick: this.setState({\n          currentPosts: allposts\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"viewall\"), React.createElement(\"div\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(Pagination, {\n        totalRecords: totalPosts,\n        pageLimit: 1,\n        pageNeighbours: 1,\n        onPageChanged: this.onPageChanged,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }))), currentPosts.map(function (post) {\n        return React.createElement(\"div\", {\n          className: \"blogcard\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"thumbnail\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \"left\",\n          alt: \"author\",\n          src: post.image,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          className: \"blogtitle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, post.title), React.createElement(\"div\", {\n          className: \"blogauthor\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          alt: \"post header\",\n          src: post.image,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }), React.createElement(\"h2\", {\n          className: \"blogauthorname\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, post.author)), \"tries\", React.createElement(\"div\", {\n          className: \"separator\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          className: \"blogtext\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, post.content)), React.createElement(\"h6\", {\n          className: \"blogmonth\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, post.date), React.createElement(Link, {\n          to: \"/posts/\".concat(post.id),\n          className: \"fa fa-arrow-down fa-3x readmore\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, \" \"));\n      }), React.createElement(\"button\", {\n        title: \"scroll up\",\n        id: \"scroll\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      })), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Blog;\n}(React.Component);\n\nexport default Blog;","map":{"version":3,"sources":["/home/square/square/square/projects/blissfull-final-project/front/src/pages/Blog.js"],"names":["React","Header","Footer","Link","Pagination","Blog","state","allposts","currentPosts","currentPage","totalPages","onPageChanged","data","pageLimit","offset","slice","setState","getAllPosts","fetch","response","json","answer","result","totalPosts","length","map","post","image","title","author","content","date","id","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport { Link } from 'react-router-dom'\nimport Pagination from '../components/Pagination'\n\n\n\n\nclass Blog extends React.Component {\n\n  state = {\n    allposts: [],\n    currentPosts: [],\n    currentPage: null,\n    totalPages: null\n  }\n\n  onPageChanged = data => {\n    const { allposts } = this.state;\n    const { currentPage, totalPages, pageLimit } = data;\n\n    const offset = (currentPage - 1) * pageLimit;\n    const currentPosts = allposts.slice(offset, offset + pageLimit);\n\n    this.setState({ currentPage, currentPosts, totalPages });\n  };\n\n  getAllPosts = async () => {\n\n    const response = await fetch(`http://localhost:5000/posts/allposts`)\n    const answer = await response.json()\n    if (answer) {\n      const allposts = answer.result;\n      this.setState({ allposts })\n    }\n  }\n\n  componentDidMount() {\n    this.getAllPosts();\n  }\n\n  render() {\n    const {\n      allposts,\n      currentPosts,\n      currentPage,\n      totalPages\n    } = this.state;\n    const totalPosts = allposts.length;\n\n    if (totalPosts === 0) return null;\n\n    return (\n      <div>\n        <Header />\n          <div className=\"pag\">\n            <div className=\"\">\n              <h2>\n                <strong className=\"text-seary\">{totalPosts}</strong>{\" \"}\n                Posts\n              </h2>\n              {currentPage && (\n                <span className=\"curre\">\n                  Page <span className=\"font-weight-bold\">{currentPage}</span> /{\" \"}\n                  <span className=\"font-weight-bold\">{totalPages}</span>\n                </span>\n              )}\n            </div>\n            <button className=\"viewall\" onClick={this.setState({currentPosts:allposts})}>viewall</button>\n            <div className=\"\">\n              <Pagination\n                totalRecords={totalPosts}\n                pageLimit={1}\n                pageNeighbours={1}\n                onPageChanged={this.onPageChanged}\n              />\n            </div>\n          </div>\n        {currentPosts.map(post =>\n\n          <div className=\"blogcard\">\n            <div className=\"thumbnail\"><img className=\"left\" alt=\"author\" src={post.image} /></div>\n            <div className=\"right\">\n              <h1 className=\"blogtitle\">{post.title}</h1>\n              <div className=\"blogauthor\"><img alt=\"post header\" src={post.image} />\n                <h2 className=\"blogauthorname\">{post.author}</h2>\n              </div>tries\n              <div className=\"separator\"></div>\n              <p className=\"blogtext\">{post.content}</p>\n            </div>\n            <h6 className=\"blogmonth\">{post.date}</h6>\n\n            <Link to={`/posts/${post.id}`} className=\"fa fa-arrow-down fa-3x readmore\"> </Link>\n          </div>\n\n        )}\n        <button title=\"scroll up\" id=\"scroll\"><span></span></button>\n\n        <Footer />\n      </div>\n    )\n\n  }\n}\n\nexport default Blog;\n"]},"metadata":{},"sourceType":"module"}